<!DOCTYPE HTML>
<html>
    <head>
    </head>
    <body>
        <div id="sse">
        <a href="javascript:WebSocketTest()">Run WebSocket</a>
        </div>


        <script type="text/javascript">
            connect();

            function connect() {
                if (!('WebSocket' in window)) {
                    alert('WebSocket is not supported by your Browser!');
                    return;
                }

                var ws = new WebSocket('ws://localhost:3000/lobby');

                ws.onopen = function() {
                    // Web Socket is connected, send data using send()
                    ws.send(JSON.stringify({
                        role : "spectator",
                        game_id : 55
                    }));
                    alert("Message is sent...");
                };

                ws.onmessage = function (evt) {
                    var received_msg = evt.data;
                    console.log(received_msg);
                    ws.send("Ping back");
                    return false;
                };

                ws.onclose = function() {
                    // websocket is closed.
                    alert("Connection is closed...");
                };
            }
        </script>
    </body>
</html>
